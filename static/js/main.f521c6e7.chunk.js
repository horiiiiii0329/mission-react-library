(this["webpackJsonpmission-react-library"]=this["webpackJsonpmission-react-library"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports={title:"EditBook_title__3kpwA",form:"EditBook_form__3TauR",control:"EditBook_control__29fEZ",actions:"EditBook_actions__3iLvN"}},function(e,t,n){e.exports={title:"NewBookForm_title__s6wLL",form:"NewBookForm_form__1TGF3",control:"NewBookForm_control__xFB2-",actions:"NewBookForm_actions__6fo9A"}},,function(e,t,n){e.exports={auth:"SignupForm_auth__1MzJj",control:"SignupForm_control__15KfM",actions:"SignupForm_actions__2f9-1",toggle:"SignupForm_toggle__4VF-Y"}},function(e,t,n){e.exports={auth:"LoginForm_auth__1IQlg",control:"LoginForm_control__31W8X",actions:"LoginForm_actions__1VejT"}},,function(e,t,n){e.exports={profile:"Profile_profile__2my0g",form:"Profile_form__2GBQu",control:"Profile_control__8V-AO",action:"Profile_action__6jfEu"}},function(e,t,n){e.exports={detail:"BookDetail_detail__Iraaw",title:"BookDetail_title__3j4Y3",comments:"BookDetail_comments__1nJF4"}},,,function(e,t,n){e.exports={header:"MainNavigation_header__4Jzyy",logo:"MainNavigation_logo__3Pf9h"}},,,function(e,t,n){e.exports={wrapper:"Spinner_wrapper__49VVB",spinner:"Spinner_spinner__1OIfZ"}},,,,function(e,t,n){e.exports={main:"Layout_main__4UStv"}},function(e,t,n){e.exports={starting:"StartingPage_starting__jSBZB"}},function(e,t,n){e.exports={item:"BookItem_item__3Z8yL"}},function(e,t,n){e.exports={list:"BookList_list__1eR-Q"}},function(e,t,n){e.exports={item:"AddBookCard_item__27mZr"}},,,,,function(e,t,n){},,,,,,,function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),s=n(24),r=n.n(s),i=(n(35),n(2)),a=n(5),l=n(19),j=n.n(l),u=n(3),b=n(0),h=o.a.createContext({token:"",isLoggedIn:!1,name:"",login:function(e){},logout:function(){},setName:function(e){}}),d=function(e){var t=localStorage.getItem("token"),n=Object(c.useState)(t),o=Object(u.a)(n,2),s=o[0],r=o[1],i=Object(c.useState)(null),a=Object(u.a)(i,2),l=a[0],j=a[1],d={token:s,isLoggedIn:!!s,name:l,login:function(e){localStorage.setItem("token",e),r(e)},logout:function(){r(null),localStorage.removeItem("token")},setName:function(e){j(e)}};return Object(b.jsx)(h.Provider,{value:d,children:e.children})},O=h,x=function(e){var t=Object(c.useContext)(O),n=t.isLoggedIn;return n&&fetch("https://api-for-missions-and-railways.herokuapp.com/users",{method:"GET",headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return t.setName(e.name)})).catch((function(e){return console.log(e)})),Object(b.jsxs)("header",{className:j.a.header,children:[Object(b.jsx)(a.b,{to:n?"/book":"/",children:Object(b.jsx)("div",{className:j.a.logo,children:"React Library"})}),Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{children:[n&&Object(b.jsxs)("li",{children:[t.name,"\u3000\u3055\u3093"]}),!n&&Object(b.jsx)("li",{children:Object(b.jsx)(a.b,{to:"/login",children:"\u30ed\u30b0\u30a4\u30f3"})}),!n&&Object(b.jsx)("li",{children:Object(b.jsx)(a.b,{to:"/signup",children:"\u767b\u9332"})}),n&&Object(b.jsx)("li",{children:Object(b.jsx)(a.b,{to:"/profile",children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"})}),n&&Object(b.jsx)("li",{children:Object(b.jsx)("button",{onClick:function(){t.logout()},children:"\u30ed\u30b0\u30a2\u30a6\u30c8"})})]})})]})},f=n(26),m=n.n(f),p=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{onUserName:e.userName}),Object(b.jsx)("main",{className:m.a.main,children:e.children})]})},g=n(13),_=n.n(g),v=n(22),k=n.n(v);var N=function(){return Object(b.jsx)("div",{className:k.a.wrapper,children:Object(b.jsx)("div",{className:k.a.spinner})})},w=function(){var e=Object(i.g)(),t=Object(c.useRef)(),n=Object(c.useRef)(),o=Object(c.useContext)(O),s=Object(c.useState)(!1),r=Object(u.a)(s,2),a=r[0],l=r[1],j=Object(c.useState)(null),h=Object(u.a)(j,2),d=h[0],x=h[1];return Object(b.jsx)("section",{className:_.a.auth,children:Object(b.jsxs)("form",{onSubmit:function(c){c.preventDefault();var s=t.current.value,r=n.current.value;l(!0),fetch("https://api-for-missions-and-railways.herokuapp.com/signin",{method:"POST",body:JSON.stringify({email:s,password:r}),headers:{"Content-Type":"application/json"}}).then((function(e){return l(!1),e.ok?e.json():e.json().then((function(e){var t=e.ErrorMessageJP;throw new Error(t)}))})).then((function(t){o.login(t.token),e.replace("/book")})).catch((function(e){x(e.message)}))},children:[Object(b.jsxs)("div",{className:_.a.control,children:[Object(b.jsx)("label",{htmlFor:"email",children:"e-mail"}),Object(b.jsx)("input",{type:"email",id:"email",ref:t})]}),Object(b.jsxs)("div",{className:_.a.control,children:[Object(b.jsx)("label",{htmlFor:"password",children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(b.jsx)("input",{type:"password",id:"password",ref:n})]}),a&&Object(b.jsx)(N,{}),!a&&d&&Object(b.jsx)("p",{children:d}),Object(b.jsx)("div",{className:_.a.actions,children:Object(b.jsx)("button",{className:_.a.toggle,children:"\u30ed\u30b0\u30a4\u30f3"})})]})})},y=function(){return Object(b.jsx)(w,{})},S=n(15),F=n.n(S),B=function(){var e=Object(i.g)(),t=Object(c.useState)(!1),n=Object(u.a)(t,2),o=n[0],s=n[1],r=Object(c.useRef)(),a=Object(c.useContext)(O);return Object(b.jsx)("section",{className:F.a.profile,children:Object(b.jsxs)("form",{className:F.a.form,onSubmit:function(t){t.preventDefault(),s(!0);var n=r.current.value;fetch("https://api-for-missions-and-railways.herokuapp.com/users",{method:"PUT",body:JSON.stringify({name:n}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}}).then((function(t){throw t.ok&&(a.setName(n),s(!1),e.replace("/book")),t})).catch((function(e){return console.log(e)}))},children:[Object(b.jsxs)("div",{className:F.a.control,children:[Object(b.jsxs)("label",{htmlFor:"new-password",children:["\u30e6\u30fc\u30b6\u30fc\u540d:",a.name]}),Object(b.jsx)("input",{type:"text",id:"new-name",ref:r,placeholder:"\u30e6\u30fc\u30b6\u30fc\u540d"})]}),o&&Object(b.jsx)(N,{}),Object(b.jsx)("div",{className:F.a.action,children:Object(b.jsx)("button",{children:"\u66f4\u65b0"})})]})})},L=function(){return Object(b.jsx)(B,{})},C=n(12),E=n.n(C),I=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useRef)(),o=Object(c.useContext)(O),s=Object(i.g)(),r=Object(c.useState)(!1),a=Object(u.a)(r,2),l=a[0],j=a[1],h=Object(c.useState)(null),d=Object(u.a)(h,2),x=d[0],f=d[1];return Object(b.jsx)("section",{className:E.a.auth,children:Object(b.jsxs)("form",{onSubmit:function(c){c.preventDefault();var r=e.current.value,i=t.current.value,a=n.current.value;j(!0),fetch("https://api-for-missions-and-railways.herokuapp.com/users",{method:"POST",body:JSON.stringify({name:r,email:i,password:a})}).then((function(e){return j(!1),e.ok?e.json():e.json().then((function(e){var t=e.ErrorMessageJP;throw new Error(t)}))})).then((function(e){o.login(e.token),s.replace("/book"),s.go(0)})).catch((function(e){f(e.message)}))},children:[Object(b.jsxs)("div",{className:E.a.control,children:[Object(b.jsx)("label",{htmlFor:"name",children:"\u540d\u524d"}),Object(b.jsx)("input",{type:"text",id:"name",ref:e})]}),Object(b.jsxs)("div",{className:E.a.control,children:[Object(b.jsx)("label",{htmlFor:"email",children:"e-mail"}),Object(b.jsx)("input",{type:"email",id:"email",ref:t})]}),Object(b.jsxs)("div",{className:E.a.control,children:[Object(b.jsx)("label",{htmlFor:"password",children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(b.jsx)("input",{type:"password",id:"password",ref:n})]}),l&&Object(b.jsx)(N,{}),!l&&x&&Object(b.jsx)("p",{children:x}),Object(b.jsx)("div",{className:E.a.actions,children:Object(b.jsx)("button",{className:E.a.toggle,children:"\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7"})})]})})},T=function(){return Object(b.jsx)(I,{})},R=n(27),P=n.n(R),A=function(){return Object(b.jsx)("section",{className:P.a.starting,children:Object(b.jsx)("h1",{children:"\u3053\u3093\u306b\u3061\u306f\uff01\uff01\uff01"})})},J=function(){return Object(b.jsx)(A,{})},z=n(28),D=n.n(z),M=function(e){var t=e.text;return Object(b.jsxs)("li",{className:D.a.item,children:[Object(b.jsxs)("figure",{children:[Object(b.jsx)("blockquote",{children:Object(b.jsx)("p",{children:e.title})}),Object(b.jsxs)("figcaption",{children:[t.substring(0,100),"..."]})]}),e.isMine&&Object(b.jsx)(a.b,{className:"btn",to:"/edit/".concat(e.id),children:"\u7de8\u96c6"}),Object(b.jsx)(a.b,{className:"btn",to:"/detail/".concat(e.id),children:"\u8a73\u7d30"})]})},V=n(29),G=n.n(V),U=n(30),Z=n.n(U),Q=function(){var e=Object(i.g)();return Object(b.jsxs)("li",{className:Z.a.item,onClick:function(){e.replace("/new")},children:[Object(b.jsx)("figure",{children:Object(b.jsx)("blockquote",{children:Object(b.jsx)("p",{children:"\u66f8\u7c4d\u3092\u8ffd\u52a0\u3059\u308b"})})}),Object(b.jsx)(a.b,{className:"btn",to:"/new",children:"\uff0b"})]})},q=function(e){var t=Object(c.useState)(null),n=Object(u.a)(t,2),o=n[0],s=n[1],r=Object(c.useContext)(O);return Object(c.useEffect)((function(){fetch("https://api-for-missions-and-railways.herokuapp.com/books",{method:"GET",headers:{Authorization:"Bearer ".concat(r.token)}}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){s(e)})).catch((function(e){return console.log(e)}))}),[r.token]),Object(b.jsxs)("ul",{className:G.a.list,children:[Object(b.jsx)(Q,{}),o?o.map((function(e){return Object(b.jsx)(M,{id:e.id,url:e.url,title:e.title,text:e.detail,isMine:e.isMine},e.id)})):Object(b.jsx)(N,{})]})},Y=n(10),K=n.n(Y),W=function(){var e=Object(i.g)(),t=Object(c.useState)(!1),n=Object(u.a)(t,2),o=n[0],s=n[1],r=Object(c.useRef)(),a=Object(c.useRef)(),l=Object(c.useRef)(),j=Object(c.useRef)(),h=Object(c.useContext)(O);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{className:K.a.title,children:"\u66f8\u7c4d\u767b\u9332"}),Object(b.jsxs)("form",{className:K.a.form,onSubmit:function(t){t.preventDefault(),s(!0);var n=r.current.value,c=a.current.value,o=l.current.value,i=j.current.value;fetch("https://api-for-missions-and-railways.herokuapp.com/books",{method:"POST",body:JSON.stringify({title:n,url:c,detail:o,review:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.token)}}).then((function(t){throw t.ok&&(s(!1),e.replace("/book")),t})).catch((function(e){return console.log(e)}))},children:[Object(b.jsxs)("div",{className:K.a.control,children:[Object(b.jsx)("label",{htmlFor:"title",children:"\u30bf\u30a4\u30c8\u30eb"}),Object(b.jsx)("input",{type:"text",ref:r})]}),Object(b.jsxs)("div",{className:K.a.control,children:[Object(b.jsx)("label",{htmlFor:"url",children:"\u30ea\u30f3\u30af"}),Object(b.jsx)("input",{type:"text",ref:a})]}),Object(b.jsxs)("div",{className:K.a.control,children:[Object(b.jsx)("label",{htmlFor:"link",children:"\u8a73\u7d30"}),Object(b.jsx)("textarea",{type:"text",ref:l,rows:"5"})]}),Object(b.jsxs)("div",{className:K.a.control,children:[Object(b.jsx)("label",{htmlFor:"review",children:"\u611f\u60f3 "}),Object(b.jsx)("input",{type:"text",ref:j})]}),o&&Object(b.jsx)(N,{}),Object(b.jsx)("div",{className:K.a.actions,children:Object(b.jsx)("button",{children:"\u767b\u9332"})})]})]})},X=function(){return Object(b.jsx)(W,{})},H=n(16),$=n.n(H),ee=function(){var e=Object(c.useContext)(O),t=Object(i.h)().id,n=Object(c.useState)(null),o=Object(u.a)(n,2),s=o[0],r=o[1];return Object(c.useEffect)((function(){fetch("https://api-for-missions-and-railways.herokuapp.com/books/".concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return r(e)})).catch((function(e){return console.log(e)}))}),[e.token,t]),Object(b.jsx)(b.Fragment,{children:s&&Object(b.jsxs)("div",{className:$.a.detail,children:[Object(b.jsxs)("div",{className:$.a.title,children:[Object(b.jsx)("h3",{children:"\u30bf\u30a4\u30c8\u30eb"}),Object(b.jsx)("p",{children:s.title}),Object(b.jsxs)("a",{href:s.url,children:[s.url.substring(0,40),"..."]}),Object(b.jsx)("hr",{})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"\u8a73\u7d30"}),Object(b.jsx)("p",{children:s.detail})]}),Object(b.jsxs)("div",{className:$.a.comments,children:[Object(b.jsx)("h3",{children:"\u30ec\u30d3\u30e5\u30fc"}),Object(b.jsx)("span",{children:s.reviewer}),Object(b.jsx)("p",{children:s.review})]})]})})},te=function(){return Object(b.jsx)(ee,{})},ne=n(9),ce=n.n(ne),oe=function(){var e=Object(i.g)(),t=Object(c.useContext)(O),n=Object(i.h)().id,o=Object(c.useRef)(),s=Object(c.useRef)(),r=Object(c.useRef)(),a=Object(c.useRef)(),l=Object(c.useState)(!1),j=Object(u.a)(l,2),h=j[0],d=j[1],x=Object(c.useState)(null),f=Object(u.a)(x,2),m=f[0],p=f[1];Object(c.useEffect)((function(){fetch("https://api-for-missions-and-railways.herokuapp.com/books/".concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return p(e)})).catch((function(e){return console.log(e)}))}),[t.token,n]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{className:ce.a.title,children:"\u66f8\u7c4d\u60c5\u5831\u3092\u5909\u66f4"}),m?Object(b.jsxs)("form",{className:ce.a.form,onSubmit:function(c){c.preventDefault(),d(!0);var i=o.current.value,l=s.current.value,j=r.current.value,u=a.current.value;fetch("https://api-for-missions-and-railways.herokuapp.com/books/".concat(n),{method:"PUT",body:JSON.stringify({title:i,url:l,detail:j,review:u}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)}}).then((function(t){t.ok&&(d(!1),e.replace("/book"))}))},children:[Object(b.jsxs)("div",{className:ce.a.control,children:[Object(b.jsx)("label",{htmlFor:"title",children:"\u30bf\u30a4\u30c8\u30eb"}),Object(b.jsx)("input",{type:"text",ref:o,defaultValue:m.title})]}),Object(b.jsxs)("div",{className:ce.a.control,children:[Object(b.jsx)("label",{htmlFor:"url",children:"\u30ea\u30f3\u30af"}),Object(b.jsx)("input",{type:"text",ref:s,defaultValue:m.url})]}),Object(b.jsxs)("div",{className:ce.a.control,children:[Object(b.jsx)("label",{htmlFor:"link",children:"\u8a73\u7d30"}),Object(b.jsx)("input",{type:"text",ref:r,defaultValue:m.detail})]}),Object(b.jsxs)("div",{className:ce.a.control,children:[Object(b.jsx)("label",{htmlFor:"review",children:"\u611f\u60f3 "}),Object(b.jsx)("textarea",{type:"text",ref:a,defaultValue:m.review})]}),h&&Object(b.jsx)(N,{}),Object(b.jsx)("div",{className:ce.a.actions,children:Object(b.jsx)("button",{children:"\u66f4\u65b0"})}),Object(b.jsx)("div",{className:ce.a.actions,children:Object(b.jsx)("button",{type:"button",onClick:function(){d(!0),fetch("https://api-for-missions-and-railways.herokuapp.com/books/".concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(t){throw t.ok&&(d(!1),e.replace("/book")),t})).catch((function(e){console.log(e)}))},children:"\u6d88\u53bb"})})]}):Object(b.jsx)(N,{})]})},se=function(){return Object(b.jsx)(oe,{})};var re=function(e){var t=Object(c.useContext)(O);return Object(b.jsx)(p,{onUserName:e.onUserName,children:Object(b.jsxs)(i.d,{children:[Object(b.jsx)(i.b,{path:"/",exact:!0,children:Object(b.jsx)(J,{})}),!t.isLoggedIn&&Object(b.jsx)(i.b,{path:"/login",children:Object(b.jsx)(y,{})}),!t.isLoggedIn&&Object(b.jsx)(i.b,{path:"/signup",children:Object(b.jsx)(T,{})}),t.isLoggedIn&&Object(b.jsx)(i.b,{path:"/new",children:Object(b.jsx)(X,{})}),t.isLoggedIn&&Object(b.jsx)(i.b,{path:"/detail/:id",children:Object(b.jsx)(te,{})}),t.isLoggedIn&&Object(b.jsx)(i.b,{path:"/edit/:id",children:Object(b.jsx)(se,{})}),t.isLoggedIn&&Object(b.jsx)(i.b,{path:"/profile",children:Object(b.jsx)(L,{})}),t.isLoggedIn&&Object(b.jsx)(i.b,{path:"/book",children:Object(b.jsx)(q,{})}),Object(b.jsxs)(i.b,{path:"*",children:[t.isLoggedIn&&Object(b.jsx)(i.a,{to:"/book"}),!t.isLoggedIn&&Object(b.jsx)(i.a,{to:"/"})]})]})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),s(e),r(e)}))};r.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(d,{children:Object(b.jsx)(a.a,{children:Object(b.jsx)(re,{})})})}),document.getElementById("root")),ie()}],[[42,1,2]]]);
//# sourceMappingURL=main.f521c6e7.chunk.js.map