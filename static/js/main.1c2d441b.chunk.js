(this["webpackJsonpmission-react-library"]=this["webpackJsonpmission-react-library"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports={title:"EditBook_title__2vmAS",form:"EditBook_form__2xaD_",control:"EditBook_control__ZU7kO",actions:"EditBook_actions__1UMOa"}},function(e,t,n){e.exports={title:"NewBookForm_title__1l-f-",form:"NewBookForm_form__oYF0N",control:"NewBookForm_control__394b-",actions:"NewBookForm_actions__3cQGV"}},,function(e,t,n){e.exports={auth:"SignupForm_auth__bUXK0",control:"SignupForm_control__ln-fX",actions:"SignupForm_actions__3dl4-",toggle:"SignupForm_toggle__1m7DF"}},function(e,t,n){e.exports={auth:"LoginForm_auth__1y-O5",control:"LoginForm_control__1hPyS",actions:"LoginForm_actions__2EoT0"}},,function(e,t,n){e.exports={profile:"Profile_profile__2VM8b",form:"Profile_form__2KgXg",control:"Profile_control__1J0h2",action:"Profile_action__1NqB7"}},function(e,t,n){e.exports={detail:"BookDetail_detail__1z7lc",title:"BookDetail_title__XLVrC",comments:"BookDetail_comments__3fPEv"}},,,function(e,t,n){e.exports={header:"MainNavigation_header__2lqQ1",logo:"MainNavigation_logo__1TgMx"}},,,function(e,t,n){e.exports={wrapper:"Spinner_wrapper__1KUMJ",spinner:"Spinner_spinner__19owv"}},,,,function(e,t,n){e.exports={main:"Layout_main__1dFZc"}},function(e,t,n){e.exports={starting:"StartingPage_starting__2JH20"}},function(e,t,n){e.exports={item:"BookItem_item__2xfS9"}},function(e,t,n){e.exports={list:"BookList_list__2OJxS"}},function(e,t,n){e.exports={item:"AddBookCard_item__10ciF"}},,,,,function(e,t,n){},,,,,,,function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),s=n(24),r=n.n(s),i=(n(35),n(2)),a=n(5),l=n(19),j=n.n(l),b=n(3),u=n(0),h=o.a.createContext({token:"",isLoggedIn:!1,name:"",login:function(e){},logout:function(){},setName:function(e){}}),d=function(e){var t=localStorage.getItem("token"),n=Object(c.useState)(t),o=Object(b.a)(n,2),s=o[0],r=o[1],i=Object(c.useState)(null),a=Object(b.a)(i,2),l=a[0],j=a[1],d={token:s,isLoggedIn:!!s,name:l,login:function(e){localStorage.setItem("token",e),r(e)},logout:function(){r(null),localStorage.removeItem("token")},setName:function(e){j(e)}};return Object(u.jsx)(h.Provider,{value:d,children:e.children})},O=h,x=function(e){var t=Object(c.useContext)(O),n=t.isLoggedIn;return n&&fetch("https://api-for-missions-and-railways.herokuapp.com/users",{method:"GET",headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return t.setName(e.name)})).catch((function(e){return console.log(e)})),Object(u.jsxs)("header",{className:j.a.header,children:[Object(u.jsx)(a.b,{to:n?"/book":"/",children:Object(u.jsx)("div",{className:j.a.logo,children:"React Library"})}),Object(u.jsx)("nav",{children:Object(u.jsxs)("ul",{children:[n&&Object(u.jsxs)("li",{children:[t.name,"\u3000\u3055\u3093"]}),!n&&Object(u.jsx)("li",{children:Object(u.jsx)(a.b,{to:"/login",children:"\u30ed\u30b0\u30a4\u30f3"})}),!n&&Object(u.jsx)("li",{children:Object(u.jsx)(a.b,{to:"/signup",children:"\u767b\u9332"})}),n&&Object(u.jsx)("li",{children:Object(u.jsx)(a.b,{to:"/profile",children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"})}),n&&Object(u.jsx)("li",{children:Object(u.jsx)("button",{onClick:function(){t.logout()},children:"\u30ed\u30b0\u30a2\u30a6\u30c8"})})]})})]})},f=n(26),m=n.n(f),p=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(x,{onUserName:e.userName}),Object(u.jsx)("main",{className:m.a.main,children:e.children})]})},g=n(13),_=n.n(g),v=n(22),k=n.n(v);var N=function(){return Object(u.jsx)("div",{className:k.a.wrapper,children:Object(u.jsx)("div",{className:k.a.spinner})})},w=function(){var e=Object(i.g)(),t=Object(c.useRef)(),n=Object(c.useRef)(),o=Object(c.useContext)(O),s=Object(c.useState)(!1),r=Object(b.a)(s,2),a=r[0],l=r[1],j=Object(c.useState)(null),h=Object(b.a)(j,2),d=h[0],x=h[1];return Object(u.jsx)("section",{className:_.a.auth,children:Object(u.jsxs)("form",{onSubmit:function(c){c.preventDefault();var s=t.current.value,r=n.current.value;l(!0),fetch("https://api-for-missions-and-railways.herokuapp.com/signin",{method:"POST",body:JSON.stringify({email:s,password:r}),headers:{"Content-Type":"application/json"}}).then((function(e){return l(!1),e.ok?e.json():e.json().then((function(e){var t=e.ErrorMessageJP;throw new Error(t)}))})).then((function(t){o.login(t.token),e.replace("/book")})).catch((function(e){x(e.message)}))},children:[Object(u.jsxs)("div",{className:_.a.control,children:[Object(u.jsx)("label",{htmlFor:"email",children:"e-mail"}),Object(u.jsx)("input",{type:"email",id:"email",ref:t})]}),Object(u.jsxs)("div",{className:_.a.control,children:[Object(u.jsx)("label",{htmlFor:"password",children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(u.jsx)("input",{type:"password",id:"password",ref:n})]}),a&&Object(u.jsx)(N,{}),!a&&d&&Object(u.jsx)("p",{children:d}),Object(u.jsx)("div",{className:_.a.actions,children:Object(u.jsx)("button",{className:_.a.toggle,children:"\u30ed\u30b0\u30a4\u30f3"})})]})})},y=function(){return Object(u.jsx)(w,{})},S=n(15),F=n.n(S),B=function(){var e=Object(i.g)(),t=Object(c.useState)(!1),n=Object(b.a)(t,2),o=n[0],s=n[1],r=Object(c.useRef)(),a=Object(c.useContext)(O);return Object(u.jsx)("section",{className:F.a.profile,children:Object(u.jsxs)("form",{className:F.a.form,onSubmit:function(t){t.preventDefault(),s(!0);var n=r.current.value;fetch("https://api-for-missions-and-railways.herokuapp.com/users",{method:"PUT",body:JSON.stringify({name:n}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}}).then((function(t){throw t.ok&&(a.setName(n),s(!1),e.replace("/book")),t})).catch((function(e){return console.log(e)}))},children:[Object(u.jsxs)("div",{className:F.a.control,children:[Object(u.jsxs)("label",{htmlFor:"new-password",children:["\u30e6\u30fc\u30b6\u30fc\u540d:",a.name]}),Object(u.jsx)("input",{type:"text",id:"new-name",ref:r,placeholder:"\u30e6\u30fc\u30b6\u30fc\u540d"})]}),o&&Object(u.jsx)(N,{}),Object(u.jsx)("div",{className:F.a.action,children:Object(u.jsx)("button",{children:"\u66f4\u65b0"})})]})})},C=function(){return Object(u.jsx)(B,{})},L=n(12),E=n.n(L),I=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useRef)(),o=Object(c.useContext)(O),s=Object(i.g)(),r=Object(c.useState)(!1),a=Object(b.a)(r,2),l=a[0],j=a[1],h=Object(c.useState)(null),d=Object(b.a)(h,2),x=d[0],f=d[1];return Object(u.jsx)("section",{className:E.a.auth,children:Object(u.jsxs)("form",{onSubmit:function(c){c.preventDefault();var r=e.current.value,i=t.current.value,a=n.current.value;j(!0),fetch("https://api-for-missions-and-railways.herokuapp.com/users",{method:"POST",body:JSON.stringify({name:r,email:i,password:a})}).then((function(e){return j(!1),e.ok?e.json():e.json().then((function(e){var t=e.ErrorMessageJP;throw new Error(t)}))})).then((function(e){o.login(e.token),s.replace("/book"),s.go(0)})).catch((function(e){f(e.message)}))},children:[Object(u.jsxs)("div",{className:E.a.control,children:[Object(u.jsx)("label",{htmlFor:"name",children:"\u540d\u524d"}),Object(u.jsx)("input",{type:"text",id:"name",ref:e})]}),Object(u.jsxs)("div",{className:E.a.control,children:[Object(u.jsx)("label",{htmlFor:"email",children:"e-mail"}),Object(u.jsx)("input",{type:"email",id:"email",ref:t})]}),Object(u.jsxs)("div",{className:E.a.control,children:[Object(u.jsx)("label",{htmlFor:"password",children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(u.jsx)("input",{type:"password",id:"password",ref:n})]}),l&&Object(u.jsx)(N,{}),!l&&x&&Object(u.jsx)("p",{children:x}),Object(u.jsx)("div",{className:E.a.actions,children:Object(u.jsx)("button",{className:E.a.toggle,children:"\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7"})})]})})},T=function(){return Object(u.jsx)(I,{})},P=n(27),R=n.n(P),J=function(){return Object(u.jsx)("section",{className:R.a.starting,children:Object(u.jsx)("h1",{children:"\u3053\u3093\u306b\u3061\u306f\uff01\uff01\uff01"})})},D=function(){return Object(u.jsx)(J,{})},M=n(28),A=n.n(M),z=function(e){var t=e.text;return Object(u.jsxs)("li",{className:A.a.item,children:[Object(u.jsxs)("figure",{children:[Object(u.jsx)("blockquote",{children:Object(u.jsx)("p",{children:e.title})}),Object(u.jsxs)("figcaption",{children:[t.substring(0,100),"..."]})]}),e.isMine&&Object(u.jsx)(a.b,{className:"btn",to:"/edit/".concat(e.id),children:"\u7de8\u96c6"}),Object(u.jsx)(a.b,{className:"btn",to:"/detail/".concat(e.id),children:"\u8a73\u7d30"})]})},U=n(29),V=n.n(U),G=n(30),q=n.n(G),X=function(){var e=Object(i.g)();return Object(u.jsxs)("li",{className:q.a.item,onClick:function(){e.replace("/new")},children:[Object(u.jsx)("figure",{children:Object(u.jsx)("blockquote",{children:Object(u.jsx)("p",{children:"\u66f8\u7c4d\u3092\u8ffd\u52a0\u3059\u308b"})})}),Object(u.jsx)(a.b,{className:"btn",to:"/new",children:"\uff0b"})]})},K=function(e){var t=Object(c.useState)(null),n=Object(b.a)(t,2),o=n[0],s=n[1],r=Object(c.useContext)(O);return Object(c.useEffect)((function(){fetch("https://api-for-missions-and-railways.herokuapp.com/books",{method:"GET",headers:{Authorization:"Bearer ".concat(r.token)}}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){s(e)})).catch((function(e){return console.log(e)}))}),[r.token]),Object(u.jsxs)("ul",{className:V.a.list,children:[Object(u.jsx)(X,{}),o?o.map((function(e){return Object(u.jsx)(z,{id:e.id,url:e.url,title:e.title,text:e.detail,isMine:e.isMine},e.id)})):Object(u.jsx)(N,{})]})},Q=n(10),Z=n.n(Q),H=function(){var e=Object(i.g)(),t=Object(c.useState)(!1),n=Object(b.a)(t,2),o=n[0],s=n[1],r=Object(c.useRef)(),a=Object(c.useRef)(),l=Object(c.useRef)(),j=Object(c.useRef)(),h=Object(c.useContext)(O);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{className:Z.a.title,children:"\u66f8\u7c4d\u767b\u9332"}),Object(u.jsxs)("form",{className:Z.a.form,onSubmit:function(t){t.preventDefault(),s(!0);var n=r.current.value,c=a.current.value,o=l.current.value,i=j.current.value;fetch("https://api-for-missions-and-railways.herokuapp.com/books",{method:"POST",body:JSON.stringify({title:n,url:c,detail:o,review:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.token)}}).then((function(t){throw t.ok&&(s(!1),e.replace("/book")),t})).catch((function(e){return console.log(e)}))},children:[Object(u.jsxs)("div",{className:Z.a.control,children:[Object(u.jsx)("label",{htmlFor:"title",children:"\u30bf\u30a4\u30c8\u30eb"}),Object(u.jsx)("input",{type:"text",ref:r})]}),Object(u.jsxs)("div",{className:Z.a.control,children:[Object(u.jsx)("label",{htmlFor:"url",children:"\u30ea\u30f3\u30af"}),Object(u.jsx)("input",{type:"text",ref:a})]}),Object(u.jsxs)("div",{className:Z.a.control,children:[Object(u.jsx)("label",{htmlFor:"link",children:"\u8a73\u7d30"}),Object(u.jsx)("textarea",{type:"text",ref:l,rows:"5"})]}),Object(u.jsxs)("div",{className:Z.a.control,children:[Object(u.jsx)("label",{htmlFor:"review",children:"\u611f\u60f3 "}),Object(u.jsx)("input",{type:"text",ref:j})]}),o&&Object(u.jsx)(N,{}),Object(u.jsx)("div",{className:Z.a.actions,children:Object(u.jsx)("button",{children:"\u767b\u9332"})})]})]})},Y=function(){return Object(u.jsx)(H,{})},W=n(16),$=n.n(W),ee=function(){var e=Object(c.useContext)(O),t=Object(i.h)().id,n=Object(c.useState)(null),o=Object(b.a)(n,2),s=o[0],r=o[1];return Object(c.useEffect)((function(){fetch("https://api-for-missions-and-railways.herokuapp.com/books/".concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return r(e)})).catch((function(e){return console.log(e)}))}),[e.token,t]),Object(u.jsx)(u.Fragment,{children:s&&Object(u.jsxs)("div",{className:$.a.detail,children:[Object(u.jsxs)("div",{className:$.a.title,children:[Object(u.jsx)("h3",{children:"\u30bf\u30a4\u30c8\u30eb"}),Object(u.jsx)("p",{children:s.title}),Object(u.jsxs)("a",{href:s.url,children:[s.url.substring(0,40),"..."]}),Object(u.jsx)("hr",{})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"\u8a73\u7d30"}),Object(u.jsx)("p",{children:s.detail})]}),Object(u.jsxs)("div",{className:$.a.comments,children:[Object(u.jsx)("h3",{children:"\u30ec\u30d3\u30e5\u30fc"}),Object(u.jsx)("span",{children:s.reviewer}),Object(u.jsx)("p",{children:s.review})]})]})})},te=function(){return Object(u.jsx)(ee,{})},ne=n(9),ce=n.n(ne),oe=function(){var e=Object(i.g)(),t=Object(c.useContext)(O),n=Object(i.h)().id,o=Object(c.useRef)(),s=Object(c.useRef)(),r=Object(c.useRef)(),a=Object(c.useRef)(),l=Object(c.useState)(!1),j=Object(b.a)(l,2),h=j[0],d=j[1],x=Object(c.useState)(null),f=Object(b.a)(x,2),m=f[0],p=f[1];Object(c.useEffect)((function(){fetch("https://api-for-missions-and-railways.herokuapp.com/books/".concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return p(e)})).catch((function(e){return console.log(e)}))}),[t.token,n]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{className:ce.a.title,children:"\u66f8\u7c4d\u60c5\u5831\u3092\u5909\u66f4"}),m?Object(u.jsxs)("form",{className:ce.a.form,onSubmit:function(c){c.preventDefault(),d(!0);var i=o.current.value,l=s.current.value,j=r.current.value,b=a.current.value;fetch("https://api-for-missions-and-railways.herokuapp.com/books/".concat(n),{method:"PUT",body:JSON.stringify({title:i,url:l,detail:j,review:b}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)}}).then((function(t){t.ok&&(d(!1),e.replace("/book"))}))},children:[Object(u.jsxs)("div",{className:ce.a.control,children:[Object(u.jsx)("label",{htmlFor:"title",children:"\u30bf\u30a4\u30c8\u30eb"}),Object(u.jsx)("input",{type:"text",ref:o,defaultValue:m.title})]}),Object(u.jsxs)("div",{className:ce.a.control,children:[Object(u.jsx)("label",{htmlFor:"url",children:"\u30ea\u30f3\u30af"}),Object(u.jsx)("input",{type:"text",ref:s,defaultValue:m.url})]}),Object(u.jsxs)("div",{className:ce.a.control,children:[Object(u.jsx)("label",{htmlFor:"link",children:"\u8a73\u7d30"}),Object(u.jsx)("input",{type:"text",ref:r,defaultValue:m.detail})]}),Object(u.jsxs)("div",{className:ce.a.control,children:[Object(u.jsx)("label",{htmlFor:"review",children:"\u611f\u60f3 "}),Object(u.jsx)("textarea",{type:"text",ref:a,defaultValue:m.review})]}),h&&Object(u.jsx)(N,{}),Object(u.jsx)("div",{className:ce.a.actions,children:Object(u.jsx)("button",{children:"\u66f4\u65b0"})}),Object(u.jsx)("div",{className:ce.a.actions,children:Object(u.jsx)("button",{type:"button",onClick:function(){d(!0),fetch("https://api-for-missions-and-railways.herokuapp.com/books/".concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(t){throw t.ok&&(d(!1),e.replace("/book")),t})).catch((function(e){console.log(e)}))},children:"\u6d88\u53bb"})})]}):Object(u.jsx)(N,{})]})},se=function(){return Object(u.jsx)(oe,{})};var re=function(e){var t=Object(c.useContext)(O);return Object(u.jsx)(p,{onUserName:e.onUserName,children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{path:"/",exact:!0,children:Object(u.jsx)(D,{})}),!t.isLoggedIn&&Object(u.jsx)(i.b,{path:"/login",children:Object(u.jsx)(y,{})}),!t.isLoggedIn&&Object(u.jsx)(i.b,{path:"/signup",children:Object(u.jsx)(T,{})}),t.isLoggedIn&&Object(u.jsx)(i.b,{path:"/new",children:Object(u.jsx)(Y,{})}),t.isLoggedIn&&Object(u.jsx)(i.b,{path:"/detail/:id",children:Object(u.jsx)(te,{})}),t.isLoggedIn&&Object(u.jsx)(i.b,{path:"/edit/:id",children:Object(u.jsx)(se,{})}),t.isLoggedIn&&Object(u.jsx)(i.b,{path:"/profile",children:Object(u.jsx)(C,{})}),t.isLoggedIn&&Object(u.jsx)(i.b,{path:"/book",children:Object(u.jsx)(K,{})}),Object(u.jsxs)(i.b,{path:"*",children:[t.isLoggedIn&&Object(u.jsx)(i.a,{to:"/book"}),!t.isLoggedIn&&Object(u.jsx)(i.a,{to:"/"})]})]})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),s(e),r(e)}))};r.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(d,{children:Object(u.jsx)(a.a,{children:Object(u.jsx)(re,{})})})}),document.getElementById("root")),ie()}],[[42,1,2]]]);
//# sourceMappingURL=main.1c2d441b.chunk.js.map